@using System.Web.Optimization
@{
    ViewBag.Title = "Contact";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Styles.Render("~/Content/css/contact")
<div class="leftContent" style="width: 970px">
<div class="boxLeft" style="width: 100%">
    <div class="AboxLeft" style="width: 100%">
        <p style="width: 920px">Liên hệ</p>
        <div id="contact">
            <div class="container" style="width: 940px">
                <div class="row contact">
                    <p>
                        Chúng tôi muốn lắng nghe những góp ý của bạn để Smart Health ngày càng hoàn thiện và phục vụ tốt hơn, trở thành người bạn tin cậy cho sức khỏe mọi nhà.</p>
                    <form action="@Url.Action("SendContactMessage", "Home")" method="POST">
                        <div class="row form">
                            <div class="col-sm-6 row-col map">
                                <div class="box_wrapp">
                                    <div class="box_cont">
                                        <div class="head">
                                            <h6>Địa chỉ</h6>
                                        </div>
                                        <ul class="street">
                                            <li>Smart-Health Company</li>
                                            <li>402 Huỳnh Văn Bánh, Phường 14, Quận Phú Nhuận, TPHCM</li>
                                            <li class="icon icontop">
                                                <span class="contacticos ico1"></span>
                                                <span class="text">08-38111585</span>
                                            </li>
                                            <li class="icon">
                                                <span class="contacticos ico2"></span>
                                                <a class="text" href="#">contact@smart-health.com.vn</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 row-col">
                                <div class="box">
                                    <div class="form-group">
                                        <input class="name form-control" type="text" placeholder="Name" name="Name" />
                                    </div>
                                    <div class="form-group">
                                        <input class="mail form-control" type="text" placeholder="Email" name="Email" />
                                    </div>
                                    <div class="form-group">
                                        <input class="phone form-control" type="text" placeholder="Phone" name="Phone" />
                                    </div>
                                    <div class="box form-group">
                                        <textarea placeholder="Type a message here..." class="form-control" name="Message"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row submit">
                            <div class="col-md-3 right">
                                <button id="submitBtn" style="float: right" type="button" class="btn btn-success" onclick="submitContactForm();">Gửi tin</button>
                                <div id="submitProgress" class="progress progress-striped active" style="display: none">
                                    <div class="progress-bar progress-bar-success"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
                                        <span class="sr-only">45% Hoàn tất</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>

            <div class="map">
                <iframe width="100%" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=vi&amp;geocode=&amp;q=H%E1%BA%ADu+Giang,+ph%C6%B0%E1%BB%9Dng+4,+T%C3%A2n+B%C3%ACnh,+H%E1%BB%93+Ch%C3%AD+Minh,+Vi%E1%BB%87t+Nam&amp;aq=&amp;sll=10.807812,106.662806&amp;sspn=0.016904,0.024784&amp;ie=UTF8&amp;hq=&amp;hnear=H%E1%BA%ADu+Giang,+T%C3%A2n+B%C3%ACnh,+H%E1%BB%93+Ch%C3%AD+Minh,+Vi%E1%BB%87t+Nam&amp;ll=10.807896,106.66286&amp;spn=0.008452,0.012392&amp;t=m&amp;z=14&amp;output=embed"></iframe>
            </div>
        </div>
    </div>
</div>
</div>


    <script src="@Url.Content("~/Areas/Administrator/ClipOne/plugins/jquery-validation/dist/jquery.validate.min.js")"></script>
<script type="text/javascript">
    function submitContactForm() {
        if ($('form').valid()) {
            $('#submitBtn').hide();
            $('#submitProgress').show();
            $.ajax({
                xhr: function () {
                    var xhr = new window.XMLHttpRequest();
                    xhr.addEventListener("progress", function (evt) {
                        if (evt.lengthComputable) {
                            updateProgress(evt.loaded * 100 / evt.total);
                        }
                    }, false);
                    return xhr;
                },
                type: 'POST',
                url: $('form').attr('action'),
                async: true,
                data: $('form').serialize()
            });
        }
    }
    function updateProgress(percentage) {
        if (percentage > 100) percentage = 100;
        $('.progress-bar').css('width', percentage + '%');
        $('.progress-bar').html(percentage + '% Hoàn tất');
        if (percentage == 100) {
            $('form')[0].reset();
            $('#submitProgress').delay(3000).hide();
            $('#submitBtn').delay(3000).show();
        }
    }

    $(document).ready(function () {
        $('form').validate({
            rules: {
                Name: {
                    minlength: 3,
                    required: true
                },
                Email: {
                    minlength: 3,
                    required: true,
                    email: true
                },
                Message: {
                    minlength: 3,
                    maxlength: 300,
                    required: true
                }
            },
            highlight: function(element) {
                $(element).closest('.form-group').addClass('has-error');
                $(element).closest('.form-group').removeClass('has-success');
            },
            unhighlight: function(element) {
                $(element).closest('.form-group').removeClass('has-error');
                $(element).closest('.form-group').addClass('has-success');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function(error, element) {
                if(element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
    });
</script>